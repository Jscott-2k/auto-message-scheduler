Auto Message Scheduler

This project schedules and sends Discord webhook messages based on user-defined times submitted via a Google Form. It uses:

- Node.js for the scheduler logic  
- Discord webhooks to send messages  
- Google Apps Script to manage user submissions  
- GitHub Actions for automatic scheduling and execution  

---

## ðŸ“‹ Requirements

- [Node.js](https://nodejs.org/) (v18 or newer recommended)  
- A Discord server with permissions to create webhooks  
- A Google Form + linked Google Sheet to collect user preferences
- GitHub Actions enabled in your GitHub repo  

---

## ðŸ“¦ Install & Setup

### 1. Clone this repository

```bash
git clone https://github.com/your-username/auto-message-scheduler.git
cd auto-message-scheduler
```

### 3. Add `webhooks.json`

Place a valid `webhooks.json` file in the project root. This file should contain an array of user webhook entries and schedule times in `"HH:MM"` 24-hour UTC format. It is typically generated by a Google Apps Script connected to your Google Form.

---

## ðŸ•’ How Scheduling Works

GitHub Actions is used to run the scheduler at specific UTC times. The `scheduler.js` script automatically detects the current time and sends messages to any matching webhook schedules.

You can find the GitHub Actions workflow in `.github/workflows/scheduler.yml`. It is automatically triggered based on your scheduled times using cron syntax.


### 2. Install dependencies

```bash
npm install
```
---

## ðŸ›  Customization

To change or update the scheduled times:
1. Edit the `webhooks.json` file with the new times.
2. Commit and push to the repo.
3. GitHub Actions will run the scheduler at the specified times.

You can also generate the GitHub Actions workflow dynamically based on `webhooks.json` using `generate-scheduler-yml.js`:

```bash
npm run generate-scheduler
```

### 4. webhooks.json format

The `webhooks.json` file should be an array of user entries. Each entry must include:

- `id`: the Discord webhook ID  
- `token`: the Discord webhook token  
- `username` *(optional)*: overrides the webhook's default username  
- `avatarURL` *(optional)*: custom avatar for messages  
- `schedules`: array of messages with a `time` (UTC) and `message` text

**Example:**

```json
[
  {
    "id": "123456789012345678",
    "token": "your_webhook_token_here",
    "username": "Auto Bot",
    "avatarURL": "https://example.com/avatar.png",
    "schedules": [
      { "time": "14:00", "message": "It's 2 PM UTC!" },
      { "time": "23:35", "message": "Good night!" }
    ]
  },
  {
    "id": "987654321098765432",
    "token": "another_webhook_token",
    "schedules": [
      { "time": "04:11", "message": "Early morning reminder!" }
    ]
  }
]
```
